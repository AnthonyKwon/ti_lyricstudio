<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:vm="using:ti_Lyricstudio.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:conv="clr-namespace:ti_Lyricstudio.Converters;assembly=ti_Lyricstudio"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="670"
             x:Class="ti_Lyricstudio.Views.Controls.PlayerPanel"
			 x:DataType="vm:PlayerPanelViewModel"
			 Background="Transparent" FontWeight="SemiBold">

	<UserControl.Resources>
		<!-- Definition of resource converters -->
		<conv:PlayerTimeConverter x:Key="TimeConverter"/>
	</UserControl.Resources>

	<UserControl.Styles>
		<Style Selector="Slider#TimeSlider">
			<Setter Property="Transitions">
				<Transitions>
					<DoubleTransition Property="Opacity" Duration="0:0:0.1" Delay="0:0:2" Easing="QuadraticEaseIn"/>
				</Transitions>
			</Setter>
			<Setter Property="Opacity" Value="0.65"/>
		</Style>

		<Style Selector="Slider#TimeSlider:pointerover">
			<Setter Property="Transitions">
				<Transitions>
					<DoubleTransition Property="Opacity" Duration="0:0:0.1" Easing="SineEaseIn"/>
				</Transitions>
			</Setter>
			<Setter Property="Opacity" Value="1"/>
		</Style>
	</UserControl.Styles>

	<Grid RowDefinitions="385,48,32,*">
		<Image x:Name="Artwork" Grid.Row="0" IsVisible="{Binding IsReady}"
			   Width="300" Height="300"
			   Source="{Binding SongArtwork}"/>
		<TextBlock x:Name="SongTitle" Grid.Row="1" IsVisible="{Binding IsReady}"
				   FontSize="28" HorizontalAlignment="Center"
				   Text="{Binding SongTitle}"
				   TextTrimming="CharacterEllipsis"/>
		<TextBlock x:Name="AlbumInfo" Grid.Row="2" IsVisible="{Binding IsReady}"
				   FontSize="20" FontWeight="Regular" HorizontalAlignment="Center"
				   Text="{Binding SongAlbumInfo}"
				   TextTrimming="CharacterEllipsis"/>
		<Grid Grid.Row="3" Margin="0,10,0,0" RowDefinitions="50,65,32" IsVisible="{Binding IsReady}">
			<StackPanel Grid.Row="0">
				<Grid ColumnDefinitions="*,*" Opacity="0.5" Margin="0,0,0,5">
					<TextBlock x:Name="CurrentTime" Grid.Column="0" Classes="Time"
						FontWeight="Medium"
						Text="{Binding Time,
						Converter={StaticResource TimeConverter},
						ConverterParameter=LyricTime.String,
						FallbackValue=00:00.00}"
						HorizontalAlignment="Left"/>
					<TextBlock x:Name="SongLength" Grid.Column="1" Classes="Time"
						FontWeight="Medium"
						Text="{Binding Duration,
						Converter={StaticResource TimeConverter},
						ConverterParameter=LyricTime.String,
						FallbackValue=00:00.00}"
						HorizontalAlignment="Right"/>
				</Grid>
				<Slider x:Name="TimeSlider" Width="{Binding $parent.Bounds.Width}"
					Theme="{StaticResource TimeSlider}"
					Foreground="{Binding FgBrush}"
					IsEnabled="{Binding IsNotStopped}"
					Maximum="{Binding Duration, FallbackValue=0}"/>
			</StackPanel>
			<StackPanel Grid.Row="1" x:Name="ControlButton" HorizontalAlignment="Center"
					Orientation="Horizontal" Margin="0,0,0,15" Spacing="50">
				<Button x:Name="RewindBtn" Classes="Rewind"
					Theme="{StaticResource PlayerButton}"
					Command="{Binding RewindCommand}"/>
				<Button x:Name="StopBtn" Classes="Stop"
					Theme="{StaticResource PlayerButton}"
					Command="{Binding StopCommand}"/>
				<Button x:Name="PlayOrPauseBtn"
					Classes.Play="{Binding !IsPlaying}" Classes.Pause="{Binding IsPlaying}"
					Theme="{StaticResource PlayerButton}"
					Command="{Binding PlayOrPauseCommand}"/>
				<Button x:Name="FastForwardBtn" Classes="FastForward"
					Theme="{StaticResource PlayerButton}"
					Command="{Binding FastForwardCommand}"/>
			</StackPanel>
		</Grid>
	</Grid>
</UserControl>
